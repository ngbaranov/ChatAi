<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–ß–∞—Ç —Å GPT</title>
    <style>
        body { font-family: sans-serif; margin: 40px; }
        #chat { max-width: 600px; margin: auto; }
        .msg { margin: 5px 0; padding: 8px; border-radius: 6px; }
        .user { background: #def; text-align: right; }
        .bot { background: #eee; text-align: left; }
    </style>
</head>
<body>
    <div id="chat"></div>
    <input id="input" type="text" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ..." style="width: 100%; padding: 10px;" />

    <div style="max-width: 600px; margin: auto;">
    <label>System Prompt: <input type="text" id="prompt" value="–¢—ã –¥—Ä—É–∂–µ–ª—é–±–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫." style="width:100%"></label><br>
    <label>Model: <input type="text" id="model" value="deepseek-chat" style="width:100%"></label><br>
    <label>Temperature: <input type="number" id="temperature" step="0.1" value="0.2" min="0" max="2"></label><br>
    <label>Frequency Penalty: <input type="number" id="freq_penalty" step="0.1" value="0.1" min="0" max="2"></label><br>
    <label>Presence Penalty: <input type="number" id="pres_penalty" step="0.1" value="0.2" min="0" max="2"></label><br>
    </div>

    <script>
        const socket = new WebSocket("ws://" + location.host + "/ws/chat");
        const input = document.getElementById("input");
        const chat = document.getElementById("chat");

        function appendMessage(text, cls) {
            const div = document.createElement("div");
            div.className = "msg " + cls;
            div.textContent = text;
            chat.appendChild(div);
            chat.scrollTop = chat.scrollHeight;
        }

        socket.onmessage = event => {
            appendMessage("ü§ñ " + event.data, "bot");
        };

input.addEventListener("keydown", event => {
    if (event.key === "Enter" && input.value.trim()) {
        const message = input.value.trim();
        appendMessage("üßë " + message, "user");

        const payload = {
            message: message,
            prompt: document.getElementById("prompt").value,
            model: document.getElementById("model").value,
            temperature: parseFloat(document.getElementById("temperature").value),
            frequency_penalty: parseFloat(document.getElementById("freq_penalty").value),
            presence_penalty: parseFloat(document.getElementById("pres_penalty").value),
        };

        socket.send(JSON.stringify(payload));
        input.value = "";
    }
});
    </script>
</body>
</html>
